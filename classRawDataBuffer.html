<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BackgroundAudio: RawDataBuffer&lt; bytes &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">BackgroundAudio<span id="projectnumber">&#160;1.3.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classRawDataBuffer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">RawDataBuffer&lt; bytes &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Interrupt-safe, multicore-safe biftable buffer for libmad raw data.  
 <a href="classRawDataBuffer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="BackgroundAudioBuffers_8h_source.html">BackgroundAudioBuffers.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a01c13a593adccf310b55093050489df4" id="r_a01c13a593adccf310b55093050489df4"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRawDataBuffer.html#a01c13a593adccf310b55093050489df4">buffer</a> ()</td></tr>
<tr class="memdesc:a01c13a593adccf310b55093050489df4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get access to internal buffer pointer (avoiding memcpy)  <br /></td></tr>
<tr class="separator:a01c13a593adccf310b55093050489df4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd96298ed7ae4e314615e121580c60cf" id="r_afd96298ed7ae4e314615e121580c60cf"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRawDataBuffer.html#afd96298ed7ae4e314615e121580c60cf">available</a> ()</td></tr>
<tr class="memdesc:afd96298ed7ae4e314615e121580c60cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine number of bytes that can be read.  <br /></td></tr>
<tr class="separator:afd96298ed7ae4e314615e121580c60cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca4e0546817601ec5db4cd2b4eb96b15" id="r_aca4e0546817601ec5db4cd2b4eb96b15"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRawDataBuffer.html#aca4e0546817601ec5db4cd2b4eb96b15">availableForWrite</a> ()</td></tr>
<tr class="memdesc:aca4e0546817601ec5db4cd2b4eb96b15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine how much unused space is available in the buffer.  <br /></td></tr>
<tr class="separator:aca4e0546817601ec5db4cd2b4eb96b15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73ecb91ae8ed235b99a516ddf9359ee0" id="r_a73ecb91ae8ed235b99a516ddf9359ee0"><td class="memItemLeft" align="right" valign="top">constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRawDataBuffer.html#a73ecb91ae8ed235b99a516ddf9359ee0">size</a> ()</td></tr>
<tr class="memdesc:a73ecb91ae8ed235b99a516ddf9359ee0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get total size of the statically allocated buffer.  <br /></td></tr>
<tr class="separator:a73ecb91ae8ed235b99a516ddf9359ee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fd3e288f26e2005fe3dfaf1e03352f7" id="r_a7fd3e288f26e2005fe3dfaf1e03352f7"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRawDataBuffer.html#a7fd3e288f26e2005fe3dfaf1e03352f7">write</a> (const uint8_t *data, size_t cnt)</td></tr>
<tr class="memdesc:a7fd3e288f26e2005fe3dfaf1e03352f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy a block of memory into the buffer. Will not block.  <br /></td></tr>
<tr class="separator:a7fd3e288f26e2005fe3dfaf1e03352f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec876deb9c7930b320d0c716c42f702b" id="r_aec876deb9c7930b320d0c716c42f702b"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRawDataBuffer.html#aec876deb9c7930b320d0c716c42f702b">write0</a> (size_t cnt)</td></tr>
<tr class="memdesc:aec876deb9c7930b320d0c716c42f702b"><td class="mdescLeft">&#160;</td><td class="mdescRight">0-fill a portion of the buffer  <br /></td></tr>
<tr class="separator:aec876deb9c7930b320d0c716c42f702b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac83e09b3f02764427bc8f194db70d6d7" id="r_ac83e09b3f02764427bc8f194db70d6d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRawDataBuffer.html#ac83e09b3f02764427bc8f194db70d6d7">shiftUp</a> (size_t cnt)</td></tr>
<tr class="memdesc:ac83e09b3f02764427bc8f194db70d6d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invalidate a portion of buffer and shift remaining data up.  <br /></td></tr>
<tr class="separator:ac83e09b3f02764427bc8f194db70d6d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fbff0ac2337a64e7b28ac308bb765e3" id="r_a4fbff0ac2337a64e7b28ac308bb765e3"><td class="memItemLeft" align="right" valign="top"><a id="a4fbff0ac2337a64e7b28ac308bb765e3" name="a4fbff0ac2337a64e7b28ac308bb765e3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>flush</b> ()</td></tr>
<tr class="memdesc:a4fbff0ac2337a64e7b28ac308bb765e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Throw out any data in the buffer. <br /></td></tr>
<tr class="separator:a4fbff0ac2337a64e7b28ac308bb765e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;size_t bytes&gt;<br />
class RawDataBuffer&lt; bytes &gt;</div><p>Interrupt-safe, multicore-safe biftable buffer for libmad raw data. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">bytes</td><td>Number of bytes to statically allocate for the raw buffer </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="afd96298ed7ae4e314615e121580c60cf" name="afd96298ed7ae4e314615e121580c60cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd96298ed7ae4e314615e121580c60cf">&#9670;&#160;</a></span>available()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;size_t bytes&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classRawDataBuffer.html">RawDataBuffer</a>&lt; bytes &gt;::available </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine number of bytes that can be read. </p>
<dl class="section return"><dt>Returns</dt><dd>Available bytes </dd></dl>

</div>
</div>
<a id="aca4e0546817601ec5db4cd2b4eb96b15" name="aca4e0546817601ec5db4cd2b4eb96b15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca4e0546817601ec5db4cd2b4eb96b15">&#9670;&#160;</a></span>availableForWrite()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;size_t bytes&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classRawDataBuffer.html">RawDataBuffer</a>&lt; bytes &gt;::availableForWrite </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine how much unused space is available in the buffer. </p>
<dl class="section return"><dt>Returns</dt><dd>Free bytes </dd></dl>

</div>
</div>
<a id="a01c13a593adccf310b55093050489df4" name="a01c13a593adccf310b55093050489df4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01c13a593adccf310b55093050489df4">&#9670;&#160;</a></span>buffer()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;size_t bytes&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t * <a class="el" href="classRawDataBuffer.html">RawDataBuffer</a>&lt; bytes &gt;::buffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get access to internal buffer pointer (avoiding memcpy) </p>
<dl class="section return"><dt>Returns</dt><dd>Buffer pointer </dd></dl>

</div>
</div>
<a id="ac83e09b3f02764427bc8f194db70d6d7" name="ac83e09b3f02764427bc8f194db70d6d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac83e09b3f02764427bc8f194db70d6d7">&#9670;&#160;</a></span>shiftUp()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;size_t bytes&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classRawDataBuffer.html">RawDataBuffer</a>&lt; bytes &gt;::shiftUp </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>cnt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Invalidate a portion of buffer and shift remaining data up. </p>
<p>Decoders need to be able to read an entier frame's worth of raw data from a contiguous memory region. They all operate by using the internal buffer pointer plus an offset, which they track, to avoid having to shift old data out every single frame (i.e. avoiding <code>memcpy</code>s). When they have accumulated enough of a virtual shift in their reading, they call <code>shiftUp</code> to actually do the memory copy and invalidate that old portion of the buffer.</p>
<p>In general decoders want to call this function ad <em>infrequently</em> as possible. </p>

</div>
</div>
<a id="a73ecb91ae8ed235b99a516ddf9359ee0" name="a73ecb91ae8ed235b99a516ddf9359ee0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73ecb91ae8ed235b99a516ddf9359ee0">&#9670;&#160;</a></span>size()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;size_t bytes&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr size_t <a class="el" href="classRawDataBuffer.html">RawDataBuffer</a>&lt; bytes &gt;::size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get total size of the statically allocated buffer. </p>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes in total </dd></dl>

</div>
</div>
<a id="a7fd3e288f26e2005fe3dfaf1e03352f7" name="a7fd3e288f26e2005fe3dfaf1e03352f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fd3e288f26e2005fe3dfaf1e03352f7">&#9670;&#160;</a></span>write()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;size_t bytes&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classRawDataBuffer.html">RawDataBuffer</a>&lt; bytes &gt;::write </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>cnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy a block of memory into the buffer. Will not block. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Raw data bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cnt</td><td>Number of bytes to write</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes actually written </dd></dl>

</div>
</div>
<a id="aec876deb9c7930b320d0c716c42f702b" name="aec876deb9c7930b320d0c716c42f702b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec876deb9c7930b320d0c716c42f702b">&#9670;&#160;</a></span>write0()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;size_t bytes&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classRawDataBuffer.html">RawDataBuffer</a>&lt; bytes &gt;::write0 </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>cnt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>0-fill a portion of the buffer </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cnt</td><td>Number of 0 bytes to write</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes actually written </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="BackgroundAudioBuffers_8h_source.html">BackgroundAudioBuffers.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
